---
import type { CollectionEntry } from 'astro:content';

import { dateRangeSorter } from '@/utils/date-sorters';

import TimelineItem from './timeline-item.astro';

interface Props {
  entries: CollectionEntry<'work'>[] | CollectionEntry<'education'>[] | CollectionEntry<'projects'>[];
}

const { entries } = Astro.props;
---

<ul class="space-y-10">
  {
    entries
      .map((entry) => ({
        entry,
        startDate: entry.data.startDate,
        endDate: entry.data.endDate,
      }))
      .toSorted(dateRangeSorter)
      .map(({ entry }, i, arr) => (
        <>
          <TimelineItem {entry} />
          {i < arr.length - 1 && <hr />}
        </>
      ))
  }
</ul>
