---
import type { ComponentProps } from 'astro/types';
import { Image } from 'astro:assets';

import type { ContextSlice } from '@/types/context';
import { getGlobalContext } from '@/utils/get-global-context';

type Props = ComponentProps<typeof Image>;

const context = getGlobalContext<ContextSlice<'type'>>(Astro);

const { loading = context.type === 'web' ? 'lazy' : 'eager', ...props } = Astro.props;
---

<Image loading={loading} {...props} />
